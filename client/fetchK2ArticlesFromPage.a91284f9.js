const e=new DOMParser;async function t(t){const a=await fetch(t);if(!a.ok)throw a;const n=a.headers.get("content-type");if(!n.includes("text/html"))throw`expected content-type to include 'text/html', but found ${n}`;const r=await a.text();return e.parseFromString(r,"text/html")}export default async function(e){if(!e)throw"URL for articles page not provided";const a=(await t(e)).getElementById("itemListPrimary").getElementsByClassName("itemContainer"),n=[];for(const e of a){const t=e.getElementsByClassName("catItemImage")[0].getElementsByTagName("img")[0],a=e.getElementsByClassName("catItemTitle")[0].getElementsByTagName("a")[0],r=e.getElementsByClassName("catItemAuthor")[0].getElementsByTagName("a")[0],l=e.getElementsByClassName("catItemCategory")[0].getElementsByTagName("a")[0],m=e.getElementsByClassName("catItemDateCreated")[0];n.push({title:a.innerText.trim(),link:a.href.replace(/.+?canalsolar.com.br/,"").replace("/item",""),author:{name:r.innerText,link:r.href.replace(/.+?canalsolar.com.br/,"")},category:{name:l.innerText,link:l.href.replace(/.+?canalsolar.com.br/,"")},thumbnail:{src:t.src.replace(/.+?canalsolar.com.br/,""),alt:t.alt},pubDate:m.innerText.trim()})}return n}export{t as fetchHtml};
